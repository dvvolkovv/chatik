# âš™ï¸ ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ Ð´Ð»Ñ Railway

## Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ ÑÑ‚Ð¸ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð² Railway Variables

### 1. Ð¡ÐµÐºÑ€ÐµÑ‚Ð½Ñ‹Ðµ ÐºÐ»ÑŽÑ‡Ð¸ (Ð¡Ð“Ð•ÐÐ•Ð Ð˜Ð ÐžÐ’ÐÐÐ«)
```
SECRET_KEY=XjLcs930XeToeCqKQG9EFMPO0YOqPPHIg_YNBNqHNVU
JWT_SECRET_KEY=21bc50f42a06b8110b7cad0d8fc686b1f508eb6b7ea0145b91962d32dce3c125
```

### 2. Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… (Ð’ÐÐ¨Ð˜ Ð”ÐÐÐÐ«Ð•)
```
DATABASE_URL=postgresql+asyncpg://postgres:gqymLKnzKXkfZJjcBWqeucumzqBGfuwu@shuttle.proxy.rlwy.net:10648/railway
REDIS_URL=redis://default:FmvEuttDGzulaXNXozSQFPAaxhybIeAX@trolley.proxy.rlwy.net:52705
```

âš ï¸ Ð’ÐÐ–ÐÐž: ÐžÐ±Ñ€Ð°Ñ‚Ð¸Ñ‚Ðµ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ Ð½Ð° `postgresql+asyncpg://` Ð²Ð¼ÐµÑÑ‚Ð¾ `postgresql://`

### 3. LLM API ÐºÐ»ÑŽÑ‡Ð¸ (ÐÐ£Ð–ÐÐž ÐŸÐžÐ›Ð£Ð§Ð˜Ð¢Ð¬)
```
OPENAI_API_KEY=sk-Ð²Ð°Ñˆ_ÐºÐ»ÑŽÑ‡_openai
ANTHROPIC_API_KEY=sk-ant-Ð²Ð°Ñˆ_ÐºÐ»ÑŽÑ‡_anthropic
GOOGLE_API_KEY=AIza-Ð²Ð°Ñˆ_ÐºÐ»ÑŽÑ‡_google
```

Ð“Ð´Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ:
- OpenAI: https://platform.openai.com/api-keys
- Anthropic: https://console.anthropic.com/settings/keys
- Google: https://makersuite.google.com/app/apikey

### 4. CORS (Ð¿Ð¾ÑÐ»Ðµ Ð´ÐµÐ¿Ð»Ð¾Ñ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð°)
```
CORS_ORIGINS=http://localhost:8888,https://your-frontend.vercel.app
```

### 5. ÐžÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ
```
APP_ENV=production
DEBUG=False
APP_NAME=AI Chat Platform
API_V1_PREFIX=/api/v1
HOST=0.0.0.0
PORT=8000
```

### 6. JWT Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
```
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
```

### 7. Ð›Ð¸Ð¼Ð¸Ñ‚Ñ‹
```
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
```

---

## ðŸ“‹ Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ Ð¿Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸ÑŽ Ð² Railway

### Ð§ÐµÑ€ÐµÐ· Railway UI:

1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð²Ð°Ñˆ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð½Ð° Railway
2. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Backend ÑÐµÑ€Ð²Ð¸Ñ
3. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ð²ÐºÐ»Ð°Ð´ÐºÑƒ "Variables"
4. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ "Raw Editor"
5. Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð²ÑÐµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð²Ñ‹ÑˆÐµ (ÐºÑ€Ð¾Ð¼Ðµ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸ÐµÐ²)
6. Ð’ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð² Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€
7. Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ

### Ð§ÐµÑ€ÐµÐ· Railway CLI:

```bash
railway variables set SECRET_KEY="XjLcs930XeToeCqKQG9EFMPO0YOqPPHIg_YNBNqHNVU"
railway variables set JWT_SECRET_KEY="21bc50f42a06b8110b7cad0d8fc686b1f508eb6b7ea0145b91962d32dce3c125"
railway variables set DATABASE_URL="postgresql+asyncpg://postgres:gqymLKnzKXkfZJjcBWqeucumzqBGfuwu@shuttle.proxy.rlwy.net:10648/railway"
railway variables set REDIS_URL="redis://default:FmvEuttDGzulaXNXozSQFPAaxhybIeAX@trolley.proxy.rlwy.net:52705"
railway variables set OPENAI_API_KEY="sk-Ð²Ð°Ñˆ_ÐºÐ»ÑŽÑ‡"
railway variables set CORS_ORIGINS="http://localhost:8888"
railway variables set APP_ENV="production"
railway variables set DEBUG="False"
```

---

## ðŸ§ª Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾

Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ `.env` Ñ„Ð°Ð¹Ð»:

```bash
cd /Users/dmitry/Downloads/ai-chat-backend
cat > .env << 'EOF'
SECRET_KEY=XjLcs930XeToeCqKQG9EFMPO0YOqPPHIg_YNBNqHNVU
JWT_SECRET_KEY=21bc50f42a06b8110b7cad0d8fc686b1f508eb6b7ea0145b91962d32dce3c125
DATABASE_URL=postgresql+asyncpg://postgres:gqymLKnzKXkfZJjcBWqeucumzqBGfuwu@shuttle.proxy.rlwy.net:10648/railway
REDIS_URL=redis://default:FmvEuttDGzulaXNXozSQFPAaxhybIeAX@trolley.proxy.rlwy.net:52705
OPENAI_API_KEY=sk-Ð²Ð°Ñˆ_ÐºÐ»ÑŽÑ‡
CORS_ORIGINS=http://localhost:8888,http://localhost:3000
APP_ENV=development
DEBUG=True
EOF

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
uvicorn app.main:app --reload
```

---

## âœ… Ð§ÐµÐºÐ»Ð¸ÑÑ‚ Ð¿ÐµÑ€ÐµÐ´ Ð´ÐµÐ¿Ð»Ð¾ÐµÐ¼

- [âœ“] PostgreSQL ÑÐ¾Ð·Ð´Ð°Ð½ Ð½Ð° Railway
- [âœ“] Redis ÑÐ¾Ð·Ð´Ð°Ð½ Ð½Ð° Railway
- [âœ“] Ð¡ÐµÐºÑ€ÐµÑ‚Ð½Ñ‹Ðµ ÐºÐ»ÑŽÑ‡Ð¸ ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹
- [ ] OpenAI API ÐºÐ»ÑŽÑ‡ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½
- [ ] Backend Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½ Ðº Railway
- [ ] ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ñ‹ Ð² Railway
- [ ] Ð”ÐµÐ¿Ð»Ð¾Ð¹ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½
- [ ] ÐœÐ¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ñ‹
- [ ] Health check Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

---

## ðŸš€ ÐŸÐ¾ÑÐ»Ðµ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ…

1. **Railway Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚** Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
2. **ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸:**
   ```bash
   railway run alembic upgrade head
   ```
3. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ health:**
   ```bash
   curl https://your-app.railway.app/health
   ```
4. **ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Swagger UI:**
   ```
   https://your-app.railway.app/docs
   ```

---

## ðŸ“ Ð’Ð°Ð¶Ð½Ñ‹Ðµ Ð·Ð°Ð¼ÐµÑ‚ÐºÐ¸

### DATABASE_URL
âš ï¸ Railway Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ `postgresql://`, Ð½Ð¾ FastAPI + SQLAlchemy 2.0 Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ `postgresql+asyncpg://`

**Ð‘Ñ‹Ð»Ð¾:** `postgresql://postgres:...`  
**Ð¡Ñ‚Ð°Ð»Ð¾:** `postgresql+asyncpg://postgres:...`

### OPENAI_API_KEY
ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð¾ Ð½ÑƒÐ¶ÐµÐ½ Ñ…Ð¾Ñ‚Ñ Ð±Ñ‹ Ð¾Ð´Ð¸Ð½ LLM API ÐºÐ»ÑŽÑ‡ Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ.
ÐœÐ¾Ð¶Ð½Ð¾ Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ OpenAI (GPT-3.5-turbo Ð´ÐµÑˆÐµÐ²Ð»Ðµ).

### CORS_ORIGINS
Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ URL Ð²Ð°ÑˆÐµÐ³Ð¾ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð° Ð¿Ð¾ÑÐ»Ðµ ÐµÐ³Ð¾ Ð´ÐµÐ¿Ð»Ð¾Ñ.
ÐœÐ¾Ð¶Ð½Ð¾ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ‡ÐµÑ€ÐµÐ· Ð·Ð°Ð¿ÑÑ‚ÑƒÑŽ.

---

**Ð“Ð¾Ñ‚Ð¾Ð²Ð¾! Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ ÑÑ‚Ð¸ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð² Railway Ð¸ Ð·Ð°Ð´ÐµÐ¿Ð»Ð¾Ð¹Ñ‚Ðµ! ðŸš€**
